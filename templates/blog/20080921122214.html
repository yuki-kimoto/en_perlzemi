<ol class = "bread" itemscope itemtype = "http://schema.org/BreadcrumbList">  <li itemprop = "itemListElement" itemscope itemtype = "http://schema.org/ListItem">    <a itemprop="item" href="/">        <span itemprop = "name">Perl </span></a>
    <meta itemprop = "position" content = "1" />
  </li>
  &#8250;
  <li itemprop = "itemListElement" itemscope itemtype = "http://schema.org/ListItem">    <a itemprop="item" href="/blog/20161026147748.html">      <span itemprop = "name">Numerical value </span></a>
    <meta itemprop = "position" content = "2" />
  </li>
  &#8250;
  <li itemprop = "itemListElement" itemscope itemtype = "http://schema.org/ListItem">      <span itemprop = "name">Floating point comparison </span>
    <meta itemprop = "position" content = "3" />
  </li>
</ol>
<h2>Compare floating point</h2>



Since computers use binary numbers internally, errors occur in the calculation process for decimal numbers that cannot be expressed in binary numbers. In order to ignore the effect of errors that occur in the process of binary arithmetic, it is necessary to round the numbers to a certain significant digit and compare them.

Use <a href="/blog/20081001122296.html">sprintf function</a> to round the digits.

<pre>
sprintf("%.5g", $num1);
</pre>

"%.5g" is a format specification that rounds a floating point number to 5 significant digits.

<h3>Example program</h3>

This is an example to compare floating point numbers.

<pre>
use strict;
use warnings;

my $num1 = 1;
my $num2;

# Add 0.1 10 times
for my $i (1 .. 10) {
  $num2 += 0.1;
}

print "(1) There is an error.\n";
if ($num1 != $num2) {
  print'$num1 and $num2 are not equal'. "\n\n";
}

print "(2) -1 Floating point rounded to 5 decimal places and compared (equal).\n";
my $num1_cut5 = sprintf("%.5g", $num1);
my $num2_cut5 = sprintf("%.5g", $num2);

print $num1_cut5 . "\n";
print $num2_cut5 . "\n";
</pre>